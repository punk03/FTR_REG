# Инструкция по установке и запуску

## Требования

- Python 3.10 или выше
- pip (менеджер пакетов Python)
- Интернет для первоначальной синхронизации (опционально)

## Установка

### 1. Клонирование репозитория

Если вы еще не клонировали репозиторий:

```bash
git clone https://github.com/punk03/FTR_REG.git
cd FTR_REG/desktop-app
```

### 2. Создание виртуального окружения (рекомендуется)

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**macOS/Linux:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Настройка конфигурации

Скопируйте пример конфигурации:

```bash
cp .env.example .env
```

Отредактируйте `.env` файл и укажите адрес вашего сервера:

```env
API_BASE_URL=http://your-server.com/api
API_TIMEOUT=30
SYNC_INTERVAL=60
AUTO_SYNC=true
DB_PATH=./data/ftr_registration.db
LOG_LEVEL=INFO
```

## Запуск

```bash
python main.py
```

## Сборка исполняемого файла

### Windows

```bash
pyinstaller --onefile --windowed --name "FTR Registration" --icon=icon.ico main.py
```

Исполняемый файл будет в папке `dist/`.

### macOS

```bash
pyinstaller --onefile --name "FTR Registration" main.py
```

### Linux

```bash
pyinstaller --onefile --name "FTR Registration" main.py
```

## Первый запуск

1. При первом запуске приложение создаст локальную базу данных
2. Введите ваши учетные данные для входа
3. После успешного входа данные автоматически синхронизируются с сервером
4. Теперь вы можете работать оффлайн - все данные хранятся локально

## Синхронизация

- **Автоматическая**: При наличии интернета синхронизация происходит автоматически каждые 60 секунд (настраивается в `.env`)
- **Ручная**: Нажмите кнопку "Синхронизировать" в меню приложения

## Работа в оффлайн режиме

Приложение полностью функционально без интернета:
- Просмотр всех данных
- Создание новых регистраций
- Редактирование данных
- Все изменения сохраняются локально

При появлении интернета все изменения автоматически синхронизируются с сервером.

## Устранение неполадок

### Ошибка подключения к серверу

1. Проверьте, что сервер доступен
2. Проверьте правильность `API_BASE_URL` в `.env`
3. Проверьте интернет-соединение

### Ошибка базы данных

1. Удалите файл базы данных (обычно в `~/.local/share/ftr_registration/`)
2. Перезапустите приложение - база создастся заново

### Проблемы с GUI

1. Убедитесь, что установлены все зависимости: `pip install -r requirements.txt`
2. Проверьте версию Python: `python --version` (должна быть 3.10+)

## Логи

Логи приложения сохраняются в:
- **Windows**: `%APPDATA%\ftr_registration\logs\app.log`
- **macOS/Linux**: `~/.local/share/ftr_registration/logs/app.log`

## Поддержка

При возникновении проблем создайте issue в репозитории проекта.

